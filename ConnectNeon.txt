âœ… The Correct Way To Connect To Neon DB From Local (Every Time)

You failed earlier because:

$DATABASE_URL was not loaded

Your shell session didnâ€™t have environment variables

macOS opens a fresh shell every time

So hereâ€™s the stable method ðŸ‘‡

ðŸŸ¢ METHOD 1 (Cleanest & Safest)
Step 1 â€” Go to project root
cd ~/capacitor-bundle/Design-Your-Destiny-by-DrMeghana-Dikshit

Step 2 â€” Load environment properly (safe way)

Instead of:

export $(grep -v '^#' .env | xargs)


Use this instead (more stable on Mac):

set -a
source .env
set +a


Now check:

echo $DATABASE_URL


If it prints the Neon URL â†’ good.

Step 3 â€” Connect
psql "$DATABASE_URL"


Thatâ€™s it.

ðŸŸ¢ METHOD 2 (Even Safer â€“ No .env loading required)

If you donâ€™t want to depend on .env loading:

Just copy the URL and paste directly:

psql "postgresql://neondb_owner:xxxxx@ep-xxxxx.neon.tech/neondb?sslmode=require"


That always works.

ðŸŸ¢ Pro Tip (Very Important)

If you open a NEW terminal window, you must reload .env again.

Because environment variables exist only in that shell session.

ðŸŸ¢ How To Exit psql

Inside psql:

\q

ðŸŸ¢ Useful Commands Once Inside

See tables:

\dt


See users:

SELECT id, name, last_activity FROM users ORDER BY id;


Check active users:

SELECT COUNT(*)
FROM users
WHERE last_activity >= NOW() - INTERVAL '24 hours';


Check practiced:

SELECT COUNT(DISTINCT user_id)
FROM activity_logs
WHERE created_at >= NOW() - INTERVAL '24 hours';

ðŸŸ¢ Why You Got This Error Earlier

This:

FATAL: database "gauravshastrakar" does not exist


Happens when:

You run:

psql


without providing DATABASE_URL.

psql then tries to connect to:

database = your mac username

local postgres server

which doesn't exist

Thatâ€™s why it failed.

ðŸŸ¢ Your System Is Now Clean

From your last queries:

User 8 updated correctly

Activity updates last_activity

24-hour logic works

Local backend works

DB connection works

You are fully in control now.

ðŸ§  Golden Rule For Future

If dashboard numbers look wrong:

Connect to DB

Run 24h queries manually

Compare with UI

Identify which metric is wrong

Check which backend server is deployed

Never guess. Always verify at DB level like you just did.

Thatâ€™s senior-level debugging.